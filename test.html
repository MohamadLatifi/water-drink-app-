<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Delegation در جاوااسکریپت</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            direction: rtl;
        }
        .container {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .explanation {
            background-color: #e8f4fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-right: 4px solid #3498db;
        }
        .list-container {
            margin: 20px 0;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        li {
            padding: 12px 15px;
            margin: 8px 0;
            background-color: #f8f9fa;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            border-right: 3px solid transparent;
        }
        li:hover {
            background-color: #e9ecef;
            transform: translateX(-5px);
        }
        li.active {
            background-color: #d4edda;
            border-right-color: #28a745;
        }
        .button-container {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        button {
            padding: 10px 15px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #2980b9;
        }
        .output {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
            min-height: 50px;
        }
        .code-example {
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Event Delegation در جاوااسکریپت</h1>
        
        <div class="explanation">
            <p>Event Delegation به ما امکان می‌دهد فقط یک event listener به عنصر والد اضافه کنیم، اما رویدادهای تمام فرزندان آن را مدیریت کنیم. در این مثال، فقط یک event listener به لیست اضافه شده است، اما کلیک روی هر آیتم لیست مدیریت می‌شود.</p>
        </div>
        
        <div class="list-container">
            <h3>لیست آیتم‌ها (با Event Delegation)</h3>
            <ul id="itemList">
                <li data-id="1">آیتم ۱</li>
                <li data-id="2">آیتم ۲</li>
                <li data-id="3">آیتم ۳</li>
                <li data-id="4">آیتم ۴</li>
                <li data-id="5">آیتم ۵</li>
            </ul>
        </div>
        
        <div class="button-container">
            <button id="addItem">افزودن آیتم جدید</button>
            <button id="removeActive">حذف آیتم فعال</button>
        </div>
        
        <div class="output" id="output">
            روی یک آیتم کلیک کنید...
        </div>
        
        <div class="code-example">
            // کد Event Delegation<br>
            document.getElementById('itemList').addEventListener('click', function(e) {<br>
            &nbsp;&nbsp;if (e.target.tagName === 'LI') {<br>
            &nbsp;&nbsp;&nbsp;&nbsp;// مدیریت کلیک روی آیتم لیست<br>
            &nbsp;&nbsp;&nbsp;&nbsp;const itemId = e.target.getAttribute('data-id');<br>
            &nbsp;&nbsp;&nbsp;&nbsp;// کد مربوطه...<br>
            &nbsp;&nbsp;}<br>
            });
        </div>
    </div>

    <script>
        // دریافت عناصر DOM
        const itemList = document.getElementById('itemList');
        const output = document.getElementById('output');
        const addItemButton = document.getElementById('addItem');
        const removeActiveButton = document.getElementById('removeActive');
        
        let itemCounter = 5;
        let activeItem = null;
        
        // Event Delegation: فقط یک event listener برای کل لیست
        itemList.addEventListener('click', function(e) {
            // بررسی می‌کنیم که آیا کاربر روی یک آیتم لیست کلیک کرده است
            if (e.target.tagName === 'LI') {
                // حذف حالت فعال از آیتم قبلی
                if (activeItem) {
                    activeItem.classList.remove('active');
                }
                
                // تنظیم آیتم جدید به عنوان فعال
                e.target.classList.add('active');
                activeItem = e.target;
                
                // نمایش اطلاعات در خروجی
                const itemId = e.target.getAttribute('data-id');
                const itemText = e.target.textContent;
                output.innerHTML = `شما روی <strong>${itemText}</strong> (شناسه: ${itemId}) کلیک کردید.`;
            }
        });
        
        // افزودن آیتم جدید به لیست
        addItemButton.addEventListener('click', function() {
            itemCounter++;
            const newItem = document.createElement('li');
            newItem.textContent = `آیتم ${itemCounter}`;
            newItem.setAttribute('data-id', itemCounter);
            itemList.appendChild(newItem);
            
            output.innerHTML = `آیتم جدید با شناسه ${itemCounter} اضافه شد.`;
        });
        
        // حذف آیتم فعال
        removeActiveButton.addEventListener('click', function() {
            if (activeItem) {
                const itemId = activeItem.getAttribute('data-id');
                activeItem.remove();
                output.innerHTML = `آیتم با شناسه ${itemId} حذف شد.`;
                activeItem = null;
            } else {
                output.innerHTML = 'هیچ آیتم فعالی برای حذف وجود ندارد.';
            }
        });
    </script>
</body>
</html>